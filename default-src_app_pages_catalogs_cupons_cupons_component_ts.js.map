{"version":3,"file":"default-src_app_pages_catalogs_cupons_cupons_component_ts.js","mappings":"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","sources":["./src/app/@core/models/cupon.models.ts","./src/app/@core/services/cupon.service.ts","./src/app/@graphql/operations/fragment/cupon.ts","./src/app/@graphql/operations/mutation/cupons.ts","./src/app/@graphql/operations/query/cupons.ts","./src/app/@pages/catalogs/cupons/cupons.component.ts","./src/app/@pages/catalogs/cupons/cupons.component.html"],"sourcesContent":["export class Cupon {\n  id: string;\n  cupon: string;\n  description: string;\n  typeDiscount: string;\n  amountDiscount: number;\n  minimumPurchase: number;\n  active?: boolean;\n}\n","import { Injectable } from '@angular/core';\nimport { Apollo } from 'apollo-angular';\nimport { ADD_CUPON, BLOCK_CUPON, UPDATE_CUPON } from 'src/app/@graphql/operations/mutation/cupons';\nimport { CUPONS_LIST_QUERY, CUPON_ID_QUERY } from 'src/app/@graphql/operations/query/cupons';\nimport { ApiService } from 'src/app/@graphql/services/api.service';\nimport { map } from 'rxjs/operators';\nimport { ACTIVE_FILTERS } from '@core/constants/filters';\nimport { ICupon } from '@core/interfaces/cupon.interface';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CuponsService extends ApiService {\n\n  constructor(apollo: Apollo) {\n    super(apollo);\n  }\n\n  add(cupon: ICupon) {\n    return this.set(\n      ADD_CUPON,\n      {\n        cupon\n      }, {}).pipe(map((result: any) => {\n        return result.addCupon;\n      })\n      );\n  }\n\n  update(cupon: ICupon) {\n    return this.set(\n      UPDATE_CUPON,\n      {\n        cupon\n      }, {}).pipe(map((result: any) => {\n        return result.updateCupon;\n      })\n      );\n  }\n\n  unblock(id: string, unblock: boolean = false, admin: boolean = false) {\n    return this.set(\n      BLOCK_CUPON,\n      {\n        id,\n        unblock,\n        admin\n      }, {}).pipe(map((result: any) => {\n        return result.blockCupon;\n      })\n      );\n  }\n\n  getCupons(page: number = 1, itemsPage: number = 10, filterActiveValues: ACTIVE_FILTERS = ACTIVE_FILTERS.ACTIVE) {\n    return this.get(CUPONS_LIST_QUERY, {\n      itemsPage, page, filterActiveValues\n    }).pipe(map((result: any) => {\n      return result.cupons;\n    }));\n  }\n\n  next() {\n    return this.get(\n      CUPON_ID_QUERY, {}, {}, false\n    ).pipe(map((result: any) => {\n      return result.cuponId.cuponId;\n    }));\n  }\n}\n","import gql from 'graphql-tag';\n\nexport const CUPON_FRAGMENT = gql`\n  fragment CuponObject on Cupon {\n    id\n    cupon\n    description\n    typeDiscount\n    amountDiscount\n    minimumPurchase\n    active\n  }\n`;\n","import gql from 'graphql-tag';\nimport { CUPON_FRAGMENT } from 'src/app/@graphql/operations/fragment/cupon';\n\nexport const ADD_CUPON = gql`\n   mutation addCupon($cupon: CuponInput!) {\n      addCupon(cupon: $cupon) {\n         status\n         message\n         cupon {\n            ...CuponObject\n         }\n      }\n   }\n   ${CUPON_FRAGMENT}\n`;\n\nexport const UPDATE_CUPON = gql`\n   mutation updateCupon($cupon: CuponInput!) {\n      updateCupon(cupon: $cupon) {\n         status\n         message\n         cupon {\n            ...CuponObject\n         }\n      }\n   }\n   ${CUPON_FRAGMENT}\n`;\n\nexport const BLOCK_CUPON = gql`\n   mutation blockCupon($id: ID!, $unblock: Boolean, $admin: Boolean) {\n      blockCupon(id: $id, unblock: $unblock, admin: $admin) {\n         status\n         message\n      }\n   }\n`;\n","import gql from 'graphql-tag';\nimport { CUPON_FRAGMENT } from '../fragment/cupon';\nimport { RESULT_INFO_FRAGMENT } from '../fragment/result-info';\n\nexport const CUPONS_LIST_QUERY = gql`\n  query cuponList($page: Int, $itemsPage: Int, $active: ActiveFilterEnum, $filterName: String) {\n    cupons(page: $page, itemsPage: $itemsPage, active: $active, filterName: $filterName) {\n      info {\n        ...ResultInfoObject\n      }\n      status\n      message\n      cupons {\n        ...CuponObject\n      }\n    }\n  }\n  ${CUPON_FRAGMENT}\n  ${RESULT_INFO_FRAGMENT}\n`;\n\nexport const CUPON_DATA_QUERY = gql`\n   query cuponData($include: Boolean!) {\n      cupons{\n         status\n         message\n         cupons {\n            ...CuponObject\n         }\n      }\n   }\n   ${CUPON_FRAGMENT}\n`;\n\nexport const CUPON_ID_QUERY = gql`\nquery {\n   cuponId{\n      status\n      message\n      cuponId\n   }\n}\n`;\n","import { Component, Input, OnInit, ViewChild } from '@angular/core';\nimport { ACTIVE_FILTERS } from '@core/constants/filters';\nimport { ICupon } from '@core/interfaces/cupon.interface';\nimport { IResultData } from '@core/interfaces/result-data.interface';\nimport { ITableColumns } from '@core/interfaces/table-columns.interface';\nimport { Cupon } from '@core/models/cupon.models';\nimport { CuponsService } from '@core/services/cupon.service';\nimport { CUPONS_LIST_QUERY } from '@graphql/operations/query/cupons';\nimport { optionsWithDetails } from '@shared/alert/alerts';\nimport { basicAlert } from '@shared/alert/toasts';\nimport { TYPE_ALERT } from '@shared/alert/values.config';\nimport { CaptureCatComponent } from '@shared/capture-cat/capture-cat.component';\nimport { TablePaginationService } from '@shared/table-pagination/table-pagination.service';\nimport { DocumentNode } from 'graphql';\n\n@Component({\n  selector: 'app-cupons',\n  templateUrl: './cupons.component.html',\n  styleUrls: ['./cupons.component.scss']\n})\nexport class CuponsComponent implements OnInit {\n  query: DocumentNode = CUPONS_LIST_QUERY;\n  context: object;\n  itemsPage: number;\n  resultData: IResultData;\n  include: boolean;\n  columns: Array<ITableColumns>;\n  filterActiveValues: ACTIVE_FILTERS;\n  mostrarBoton: boolean;\n  cupon: Cupon;\n  editMode = false;\n  nextId: string;\n  title = 'Catálogo de Cupones';\n  onlyCupons = true;\n\n  @ViewChild('mdCaptureCat') modal: CaptureCatComponent;\n  @Input() datosEnviar: FormData = new FormData();\n\n  constructor(\n    private cuponsService: CuponsService,\n    private tablePaginationService: TablePaginationService\n  ) { }\n\n  ngOnInit(): void {\n    this.context = {};\n    this.itemsPage = 10;\n    this.resultData = {\n      listKey: 'cupons',\n      definitionKey: 'cupons',\n      title: 'Cupones',\n      apiExterna: ''\n    };\n    this.include = false;\n    this.filterActiveValues = ACTIVE_FILTERS.ALL;\n    this.columns = [\n      {\n        property: 'id',\n        label: '#',\n        class: 'clave'\n      },\n      {\n        property: 'cupon',\n        label: 'Cupon',\n        class: 'descriptionShort'\n      },\n      {\n        property: 'description',\n        label: 'Descripcion',\n        class: 'descriptionShort'\n      },\n      {\n        property: 'typeDiscount',\n        label: 'Tipo Descuento',\n        class: 'clave'\n      },\n      {\n        property: 'amountDiscount',\n        label: 'Descuento',\n        class: 'importe'\n      },\n      {\n        property: 'active',\n        label: 'Activo?',\n        class: 'number'\n      }\n    ];\n    this.cupon = new Cupon();\n    this.NextId();\n  }\n\n  NextId() {\n    // Obtiene el siguiente Id del Catálogo\n    this.cuponsService.next().subscribe(result => {\n      this.nextId = result;\n    });\n  }\n\n  async takeAction($event) {\n    // Obtiene la informacion para las acciones\n    const action = $event[0];\n    const cupon = $event[1];\n    this.mostrarBoton = true;\n    switch (action) {\n      case 'add':                                       // Agregar elemento\n        this.onNewCatalog();\n        this.addForm();\n        break;\n      case 'edit':                                      // Modificar elemento\n        this.updateForm(cupon);\n        break;\n      case 'info':                                      // Mostrar información del elemento\n        this.mostrarBoton = false;\n        this.updateForm(cupon, true, true);\n        break;\n      case 'block':                                     // Bloquear elemento\n        this.unblockForm(cupon, false);\n        break;\n      case 'unblock':                                   // Bloquear elemento\n        this.unblockForm(cupon, true);\n        break;\n      default:\n        break;\n    }\n  }\n\n  onNewCatalog() {\n    this.cupon = new Cupon();\n    this.NextId();\n    this.cupon = {\n      id: this.nextId,\n      cupon: '',\n      description: '',\n      typeDiscount: '',\n      amountDiscount: 0,\n      minimumPurchase: 0,\n      active: true\n    };\n  }\n\n  private async addForm(editMode: boolean = false) {\n    this.editMode = editMode;\n    setTimeout(() => {\n      this.modal.onOpenModal(undefined, editMode, false, this.cupon);\n    }, 2000);\n  }\n\n  private async updateForm(cupon: Cupon, editMode: boolean = true, onlyView: boolean = false) {\n    this.editMode = editMode;\n    this.modal.onOpenModal(undefined, editMode, onlyView, cupon);\n  }\n\n  cuponBack(event) {\n    if (event.tipo === 'item') {\n      if (this.editMode) {                        // Si es un  para editar\n        this.updateCatalog(event.item);\n      } else {                                    // Si es un catalogo nuevo\n        this.addCatalog(event.item);\n      }\n    }\n  }\n\n  private addCatalog(cupon: ICupon) {\n    this.cuponsService.add(cupon).subscribe(\n      (res: any) => {\n        if (res.status) {\n          basicAlert(TYPE_ALERT.SUCCESS, res.message);\n          setTimeout(() => {\n            this.modal.onCloseModal();\n            this.tablePaginationService.refreshTable();\n          }, 2900);\n        } else {\n          basicAlert(TYPE_ALERT.WARNING, res.message);\n        }\n      }\n    );\n  }\n\n  private updateCatalog(cupon: ICupon) {\n    if (cupon.description !== '') {\n      this.cuponsService.update(cupon).subscribe(\n        (res: any) => {\n          if (res.status) {\n            basicAlert(TYPE_ALERT.SUCCESS, res.message);\n            setTimeout(() => {\n              this.modal.onCloseModal();\n              this.tablePaginationService.refreshTable();\n            }, 2900);\n          } else {\n            basicAlert(TYPE_ALERT.WARNING, res.message);\n          }\n        }\n      );\n    }\n  }\n\n  private async unblockForm(cupon: any, unblock: boolean) {\n    const result = (unblock) ?\n      await optionsWithDetails(\n        'Desbloquear?',\n        `Si desbloqueas el item seleccionado, se mostrara en la lista`,\n        450,\n        'No desbloquear',\n        'Si desbloquear'\n      )\n      :\n      await optionsWithDetails(\n        'Bloquear?',\n        `Si bloqueas el item seleccionado, no se mostrara en la lista`,\n        430,\n        'No bloquear',\n        'Si bloquear'\n      );\n    if (result === false) {             // Si el resultado es falso, queremos bloquear\n      this.unblockCupon(cupon.id, unblock, true);\n    }\n    this.tablePaginationService.refreshTable();\n  }\n\n  private unblockCupon(id: string, unblock: boolean = false, admin: boolean = false) {\n    this.cuponsService.unblock(id, unblock, admin).subscribe(\n      (res: any) => {\n        if (res.status) {\n          basicAlert(TYPE_ALERT.SUCCESS, res.message);\n        } else {\n          basicAlert(TYPE_ALERT.WARNING, res.message);\n        }\n      }\n    );\n  }\n}\n","<app-table-pagination [query]=\"query\" [context]=\"context\" [itemsPage]=\"itemsPage\" [resultData]=\"resultData\"\n  [include]=\"include\" [tableColumns]=\"columns\" [filterActiveValues]=\"filterActiveValues\" [title]=\"title\"\n  [onlyCupons]=\"onlyCupons\" (manageItem)=\"takeAction($event)\"></app-table-pagination>\n\n<app-capture-cat (cuponChange)=\"cuponBack($event)\" #mdCaptureCat [onlyCupons]=\"onlyCupons\"></app-capture-cat>\n"],"names":[],"sourceRoot":"webpack:///"}
{"version":3,"file":"default-src_app_pages_catalogs_config_config_component_ts.js","mappings":"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","sources":["./src/app/@core/models/config.models.ts","./src/app/@pages/catalogs/config/config.component.ts","./src/app/@pages/catalogs/config/config.component.html"],"sourcesContent":["export class Config {\n  id?: string;\n  message?: string;\n  exchange_rate?: number;\n  minimum_offer?: number;\n  offer?: number;\n}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Config } from '@core/models/config.models';\nimport { ConfigsService } from '@core/services/config.service';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { basicAlert } from '@shared/alert/toasts';\nimport { TYPE_ALERT } from '@shared/alert/values.config';\n\n@Component({\n  selector: 'app-config',\n  templateUrl: './config.component.html',\n  styleUrls: ['./config.component.scss']\n})\nexport class ConfigComponent implements OnInit {\n\n  title: string;\n  config: Config;\n  configTemp: Config;\n  onlyView: boolean;\n  submitted = false;\n  habilitaGuardar: boolean;\n  visualizarBotones: boolean;\n  captureConfig: FormGroup;\n  exchangeRatePattern = '^[0-9]{1,2}(?:\\\\.[0-9]{1,2})?$';\n\n  constructor(\n    private formBuilder: FormBuilder,\n    public modal: NgbModal,\n    public configsService: ConfigsService\n  ) { }\n\n  get f() { return this.captureConfig.controls; }\n\n  ngOnInit(): void {\n    this.title = 'Configuraciones del MarketPlance';\n    this.config = new Config();\n    this.configTemp = new Config();\n    this.onlyView = true;\n    this.habilitaGuardar = false;\n    this.visualizarBotones = false;\n    this.captureConfig = this.formBuilder.group({\n      id: ['', [Validators.required]],\n      exchange_rate: [0.0, [Validators.required, this.exchangeRateValidator]],\n      minimum_offer: [0, [Validators.required]],\n      offer: [true, [Validators.required]],\n      message: ['', [Validators.required]]\n    });\n    this.configsService.getConfig('1').subscribe((result) => {\n      this.configTemp.id = result.id;\n      this.configTemp.message = result.message;\n      this.configTemp.exchange_rate = result.exchange_rate;\n      this.configTemp.minimum_offer = result.minimum_offer;\n      this.configTemp.offer = result.offer;\n      this.config = this.configTemp;\n      this.onSetConfig(this.config);\n    });\n  }\n\n  exchangeRateValidator(control: FormControl) {\n    const value = control.value;\n    // Expresión regular para validar 2 enteros y 2 decimales\n    const pattern = /^[0-9]{1,2}(?:\\.[0-9]{1,2})?$/;\n    if (!pattern.test(value)) {\n      return { invalidExchangeRateFormat: true };\n    }\n    return null;\n  }\n\n  // tslint:disable-next-line: no-unnecessary-initializer\n  onSetConfig(config: Config = undefined) {\n    if (config) {\n      this.captureConfig.controls.id.setValue(config.id);\n      this.captureConfig.controls.message.setValue(config.message);\n      this.captureConfig.controls.exchange_rate.setValue(config.exchange_rate);\n      this.captureConfig.controls.minimum_offer.setValue(config.minimum_offer);\n      this.captureConfig.controls.offer.setValue(config.offer);\n      return;\n    }\n    this.config.id = this.captureConfig.controls.id.value;\n    this.config.message = this.captureConfig.controls.message.value;\n    this.config.exchange_rate = parseFloat(this.captureConfig.controls.exchange_rate.value);\n    this.config.minimum_offer = parseInt(this.captureConfig.controls.minimum_offer.value);\n    this.config.offer = this.captureConfig.controls.offer.value;\n  }\n\n  onModificar() {\n    this.onlyView = false;\n    this.visualizarBotones = true;\n  }\n\n  onCancelar() {\n    this.onSetConfig(this.configTemp);\n    this.onlyView = true;\n    this.visualizarBotones = false;\n  }\n\n  onGrabar() {\n    this.submitted = true;\n    if (this.captureConfig.invalid) {\n      basicAlert(TYPE_ALERT.WARNING, 'Verificar campos');\n      return;\n    }\n    this.onSetConfig();\n    this.onlyView = true;\n    this.visualizarBotones = false;\n    this.updateCatalog(this.config);\n  }\n\n  private updateCatalog(config: Config) {\n    if (config.message !== '') {\n      this.configsService.update(config).subscribe(\n        (res: any) => {\n          if (res.status) {\n            basicAlert(TYPE_ALERT.SUCCESS, res.message);\n            setTimeout(() => {\n              this.onSetConfig(config);\n            }, 2900);\n          } else {\n            basicAlert(TYPE_ALERT.WARNING, res.message);\n          }\n        }\n      );\n    }\n  }\n}\n","<div class=\"container-fluid\">\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <div class=\"card\">\n        <div class=\"card-body\">\n          <header>\n            <h2>\n              <p class=\"card-sub-title\">\n                {{title}}\n              </p>\n            </h2>\n          </header>\n          <div class=\"row\">\n            <div class=\"col-12\">\n              <div class=\"d-flex flex-row justify-content-end p-1\">\n                <button type=\"button\" class=\"btn btn-light mb-2\" title=\"Modifcar Configuraciones\"\n                  (click)=\"onModificar()\"><i class=\"fas fa-edit\">Modificar</i></button>\n              </div>\n            </div>\n          </div>\n          <div class=\"row\">\n            <form [formGroup]=\"captureConfig\">\n              <div class=\"container-fluid p-0\">\n                <div class=\"row\">\n                  <div class=\"col-3\">\n                    <label for=\"id\">Clave</label>\n                    <input type=\"text\" class=\"form-control text-end\" id=\"id\" formControlName=\"id\" placeholder=\"ID\"\n                      [attr.disabled]=\"true\">\n                  </div>\n                  <div class=\"col-3\">\n                    <label for=\"exchange_rate\">Tipo de Cambio</label>\n                    <input type=\"text\" class=\"form-control text-end\" id=\"exchange_rate\" formControlName=\"exchange_rate\"\n                      [attr.disabled]=\"onlyView ? true : null\" [pattern]=\"exchangeRatePattern\">\n                    <div *ngIf=\"captureConfig.get('exchange_rate').hasError('invalidExchangeRateFormat')\">\n                      El valor debe ser de formato 00.00 y no puede superar los 5 caracteres.\n                    </div>\n                  </div>\n                  <div class=\"col-3\">\n                    <label for=\"minimum_offer\">Cantidad Minima Ofertas</label>\n                    <input type=\"number\" class=\"form-control text-end\" id=\"minimum_offer\" formControlName=\"minimum_offer\"\n                      [attr.disabled]=\"onlyView ? true : null\" min=\"1\" pattern=\"^[0-9]+\" data-reverse=\"true\">\n                  </div>\n                  <div class=\"col-3\">\n                    <label for=\"offer\">Habilitar Ofertas</label>\n                    <div class=\"form-check form-switch form-switch-md mb-3\">\n                      <input class=\"form-check-input\" type=\"checkbox\" id=\"offer\" formControlName=\"offer\"\n                        [attr.disabled]=\"onlyView ? true : null\">\n                    </div>\n                  </div>\n                </div>\n                <div class=\"row\">\n                  <div class=\"col-12\">\n                    <label for=\"message\">Descripcion</label>\n                    <input type=\"text\" class=\"form-control\" id=\"message\" formControlName=\"message\"\n                      placeholder=\"Teclea la descripción\" [attr.disabled]=\"onlyView ? true : null\">\n                  </div>\n                </div>\n              </div>\n            </form>\n          </div>\n          <div class=\"row\">\n            <div class=\"row col-12\">&nbsp;</div>\n          </div>\n          <div class=\"row\">\n            <div class=\"row col-12\">\n              <div *ngIf=\"visualizarBotones\" class=\"col-12 d-flex flex-row justify-content-end\">\n                <button type=\"button\" class=\"btn btn-danger btn-label waves-light\" (click)=\"onCancelar()\"><i\n                    class=\"bx bx-x t label-icon\"></i> Cancelar</button>\n                <button type=\"button\" class=\"btn btn-success btn-label waves-light\" [disabled]=\"captureConfig.invalid\"\n                  (click)=\"onGrabar()\"><i class=\"bx bx-check-double label-icon\"></i> Grabar</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"],"names":[],"sourceRoot":"webpack:///"}